(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{369:function(t,a,s){"use strict";s.r(a);var e=s(43),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"api-integration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api-integration"}},[t._v("#")]),t._v(" API Integration")]),t._v(" "),s("h3",{attrs:{id:"getting-started"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getting-started"}},[t._v("#")]),t._v(" Getting Started")]),t._v(" "),s("p",[t._v("PayFast is in the process of rolling out a fully-fledged RESTful API. The first endpoints available will be for the management of subscriptions, with further functionality being released in the near future.")]),t._v(" "),s("h2",{attrs:{id:"how-it-works"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#how-it-works"}},[t._v("#")]),t._v(" How it Works")]),t._v(" "),s("p",[t._v("All API communications with PayFast take the form of standard HTTP requests. These requests are made against a set of endpoints, depending on the action required. Variables may be sent via both the headers and body of each request as specified. The minimum set of variables required to connect to PayFast’s API services are detailed below.")]),t._v(" "),s("p",[t._v("API services follow RESTful principles, and thus rely on HTTP verbs to describe the action being requested:")]),t._v(" "),s("ul",[s("li",[t._v("HTTP GET is used retrieve a resource.")]),t._v(" "),s("li",[t._v("HTTP PUT is used where an action is required on a resource.")]),t._v(" "),s("li",[t._v("HTTP POST is used where a resource needs to be created.")]),t._v(" "),s("li",[t._v("HTTP PATCH is used to update all / subset of a resource.")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("Using the wrong verb for any endpoint will result in a Bad Request (400) error")])]),t._v(" "),s("h3",{attrs:{id:"minimum-requirements"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#minimum-requirements"}},[t._v("#")]),t._v(" Minimum Requirements")]),t._v(" "),s("p",[t._v("At a minimum, the following must be provided to gain access to the API ecosystem:")]),t._v(" "),s("ol",[s("li",[t._v("A valid and an API enabled PayFast merchant account")]),t._v(" "),s("li",[t._v("A passphrase as set on the merchant account settings page")]),t._v(" "),s("li",[t._v("PayFast merchant ID")]),t._v(" "),s("li",[t._v("The version of the API you want to interact with")]),t._v(" "),s("li",[t._v("A valid merchant signature")]),t._v(" "),s("li",[t._v("A timestamp included in the request")])]),t._v(" "),s("h3",{attrs:{id:"input-formats-and-content-types"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#input-formats-and-content-types"}},[t._v("#")]),t._v(" Input Formats and Content Types")]),t._v(" "),s("p",[t._v("Sending data to the API may be done in one of two ways:")]),t._v(" "),s("ul",[s("li",[t._v("application/x-www-form-urlencoded Essentially one big query string where all name / value pairs are separated by the ‘&’ symbol, with an equal (=) symbol between name and value. This is similar to submitting the traditional HTML FORM via POST (eg. frequency=3&cycles=12…).")]),t._v(" "),s("li",[t._v("application/json Fields should be passed in as a single-level JSON representation. Example to the right in the Json tab.")])]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"frequency"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cycles"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("12")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"api-signature-generation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api-signature-generation"}},[t._v("#")]),t._v(" API Signature Generation")]),t._v(" "),s("p",[t._v("The security signature of the transmitted data takes the form of an "),s("b",[t._v("MD5 hash of the alphabetised submitted variables, header and body variables")]),t._v(", as well as the passphrase. The string from which the hash is created is the concatenation of the name value pairs of all the "),s("b",[t._v("non-blank variables")]),t._v(" with "),s("b",[t._v("‘&’")]),t._v(" used as a separator. Each value should also be "),s("b",[t._v("urlencoded")]),t._v(" (eg. “merchant-id=10000100&passphrase=passphrase&..&version=v1”).")]),t._v(" "),s("p",[t._v("The generated MD5 signature must be passed in the header of the request and this hash will be regenerated by the API and compared to ensure the integrity of the data transfer.")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// $pfData will contain all of the values to be sent to the API,")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// As well as in both the headers and the body.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pfData")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'$fieldsToTransmit'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Construct variables ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("foreach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pfData")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$key")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$val")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stripslashes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$val")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("isset")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$passPhrase")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pfData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'passphrase'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$passPhrase")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Sort the array by key, alphabetically")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ksort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pfData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Normalise the array into a parameter string")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("foreach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pfData")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$key")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$val")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$key")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'signature'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pfParamString")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$key")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'='")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("urlencode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$val")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'&amp;'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Remove the last '&amp;' from the parameter string")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pfParamString")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("substr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pfParamString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$signature")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("md5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pfParamString")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),s("h4",{attrs:{id:"difference-between-checkout-page-signature-generation-and-api-signature-generation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#difference-between-checkout-page-signature-generation-and-api-signature-generation"}},[t._v("#")]),t._v(" Difference between Checkout Page Signature generation and API Signature Generation")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th",[t._v("Checkout Page Signature")]),t._v(" "),s("th",[t._v("API Signature")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Merchant ID variable name")]),t._v(" "),s("td",[t._v("merchant_id")]),t._v(" "),s("td",[t._v("merchant-id")])]),t._v(" "),s("tr",[s("td",[t._v("Order of the string variables (before hashing)")]),t._v(" "),s("td",[t._v("The variables need to be ordered correctly, as per the checkout page documentation")]),t._v(" "),s("td",[t._v("The data is ksorted, in other words, the variable are ordered alphabetically")])]),t._v(" "),s("tr",[s("td",[t._v("Amount")]),t._v(" "),s("td",[t._v("The amount which the buyer must pay, in RANDS (ZAR)")]),t._v(" "),s("td",[t._v("The amount which the buyer must pay, in CENTS (ZAR)")])])])]),t._v(" "),s("h3",{attrs:{id:"merchant-passphrase"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#merchant-passphrase"}},[t._v("#")]),t._v(" Merchant Passphrase")]),t._v(" "),s("p",[t._v("The signature described previously utilises a passphrase that is chosen by the merchant and is linked to their account. Every request sent by the merchant will have a signature that is salted with their passphrase. The passphrase is considered a secret between the merchant and PayFast and should never be sent or given out.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("A passphrase must be set by the merchant before any API interaction is allowed")])]),t._v(" "),s("p",[t._v("The merchant may set their own passphrase by:")]),t._v(" "),s("ol",[s("li",[t._v("Login to PayFast using their merchant credentials.")]),t._v(" "),s("li",[t._v("Clicking on ‘Settings’, and then ‘Edit’ under the ‘Security Pass Phrase’ section.")]),t._v(" "),s("li",[t._v("Inputting the desired passphrase, and clicking ‘Update’")])]),t._v(" "),s("h3",{attrs:{id:"request-timestamp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#request-timestamp"}},[t._v("#")]),t._v(" Request Timestamp")]),t._v(" "),s("p",[t._v("Each request to the API must contain an ISO-8601 formatted timestamp. This field must be present in each request body along with the signature. Failure to include this field will result in an error. The timestamp field must be formatted according to ISO-8601 standards, and be in the following format:")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("YYYY-MM-DDTHH:MM[(+-)HH:MM] (e.g. 2016-04-01T12:00:01+02:00)")])]),t._v(" "),s("p",[t._v("The time zone offset group ((+-)HH:MM) is optional. If not included, the default will be assumed to be GMT +2.")]),t._v(" "),s("h3",{attrs:{id:"ip-whitelisting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ip-whitelisting"}},[t._v("#")]),t._v(" IP Whitelisting")]),t._v(" "),s("p",[t._v("Each request to the API may be controlled by an IP address whitelist. If set, the IP address of the server completing the API call must be in the given list, else the action will not be processed. The whitelist can be set on the merchant’s settings page and is an optional security setting.")]),t._v(" "),s("h3",{attrs:{id:"variable-format"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#variable-format"}},[t._v("#")]),t._v(" Variable format")]),t._v(" "),s("p",[t._v("The below table describes the formats of the variables used when integrating with PayFast.")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Format")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("alphanumeric")]),t._v(" "),s("td",[t._v("A-Z, a-z, 0-9")])]),t._v(" "),s("tr",[s("td",[t._v("alphanumericextended")]),t._v(" "),s("td",[t._v("alphanumeric and special characters _-/")])]),t._v(" "),s("tr",[s("td",[t._v("char")]),t._v(" "),s("td",[t._v("maximum number of characters")])]),t._v(" "),s("tr",[s("td",[t._v("decimal")]),t._v(" "),s("td",[t._v("numeric and optional decimal point")])]),t._v(" "),s("tr",[s("td",[t._v("email")]),t._v(" "),s("td",[t._v("valid email address")])]),t._v(" "),s("tr",[s("td",[t._v("numeric")]),t._v(" "),s("td",[t._v("numeric digits, 0-9")])]),t._v(" "),s("tr",[s("td",[t._v("url/alphanumericspecial")]),t._v(" "),s("td",[t._v("alphanumeric and special characters _-/:&?#=+")])]),t._v(" "),s("tr",[s("td",[t._v("MD5 hash (characters must be in lower case)")]),t._v(" "),s("td",[t._v("32 character hexadecimal number")])])])]),t._v(" "),s("h2",{attrs:{id:"recurring-billing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#recurring-billing"}},[t._v("#")]),t._v(" Recurring Billing")]),t._v(" "),s("h3",{attrs:{id:"introduction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[t._v("#")]),t._v(" Introduction")]),t._v(" "),s("p",[t._v("The recurring service will allow for merchants to create two methods of recurring payments, one method being a traditional subscription model of a recurring charge on a given date, the other a one-click ad hoc model where the future dates and amounts of payments may be unknown.")]),t._v(" "),s("h3",{attrs:{id:"how-it-works-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#how-it-works-2"}},[t._v("#")]),t._v(" How it Works")]),t._v(" "),s("p",[t._v("In order to setup a subscription or ad hoc payment you will first need to follow the "),s("a",{attrs:{href:"https://developers.payfast.co.za/documentation/#web-integration",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web Integration"),s("OutboundLink")],1),t._v(" documentation and include the necessary payment parameters for subscriptions or ad hoc payments. Once setup, the buyer will not have to be redirected to PayFast again in order to make payment, and you will be able to perform the below mentioned actions via the API making use of the token sent to your notify URL as part of the ITN. For a subscription, PayFast will charge the credit card according to the data sent in the payment request, for ad hoc payments PayFast will only charge the buyers card when instructed to do so via the API.")]),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/getting_started_recurring.png"),alt:"Getting started with recurring billing and Payfast"}}),t._v(" "),s("h3",{attrs:{id:"subscriptions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#subscriptions"}},[t._v("#")]),t._v(" Subscriptions")]),t._v(" "),s("p",[t._v("The buyer who chooses to enter into a subscription with a merchant will, after checkout, be redirected to PayFast where only the credit card payment option will be available. After a successful first payment there is no need for the buyer to make any further manual payments for the subscription. The recurring amount will be deducted from their credit card in accordance with the frequency, billing date and number of payments (cycles) given. Each successful payment will create an ITN to the merchant and they will be able to manage the subscription via an API or from their PayFast account.")]),t._v(" "),s("h3",{attrs:{id:"ad-hoc-payments"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ad-hoc-payments"}},[t._v("#")]),t._v(" Ad Hoc Payments")]),t._v(" "),s("p",[t._v("A buyer who agrees to enter into an ad hoc payment with a merchant will, after checkout, be redirected to PayFast where only the credit card payment option will be available. After a successful first payment there is no need for the buyer to make any further manual payments. For any future payments the merchant will only need to send a token value to the API to have the associated credit card of the buyer charged. On each successful payment, an ITN will be sent to the merchant and they will be able to manage the subscription via the API or from their PayFast account.")]),t._v(" "),s("h3",{attrs:{id:"r0-00-initial-transaction"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#r0-00-initial-transaction"}},[t._v("#")]),t._v(" R0.00 Initial Transaction")]),t._v(" "),s("p",[t._v("It is possible to setup a subscription or ad hoc payment with an initial amount of R0.00. This would be used with subscriptions if the first cycle/period is free (the recurring_amount value would need to be a minimum of R5.00), or, in the case of ad hoc payments it is used to setup the buyers account on the merchants site, allowing for future payments. If the initial amount is R0.00 the buyer will be redirected to PayFast, where they will input their credit card details and go through 3D Secure, but no money will be deducted.")]),t._v(" "),s("h3",{attrs:{id:"integration-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#integration-options"}},[t._v("#")]),t._v(" Integration Options")]),t._v(" "),s("h4",{attrs:{id:"pay-now-button"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pay-now-button"}},[t._v("#")]),t._v(" Pay Now Button")]),t._v(" "),s("p",[t._v("One of the easiest ways to create a subscription is to use a "),s("a",{attrs:{href:"https://www.payfast.co.za/html-buttons/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Pay Now"),s("OutboundLink")],1),t._v(" button. The button code can be generated from your "),s("a",{attrs:{href:"https://www.payfast.co.za/user/login",target:"_blank",rel:"noopener noreferrer"}},[t._v("PayFast dashboard"),s("OutboundLink")],1),t._v(". Simply fill in the necessary fields (ensuring the subscription fields are populated), click ‘generate’ and copy the code to your website.")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("Only available for subscriptions. Ad hoc payments will require API integration.")])]),t._v(" "),s("h4",{attrs:{id:"payment-request"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#payment-request"}},[t._v("#")]),t._v(" Payment Request")]),t._v(" "),s("p",[t._v("Should a merchant require a buyer to start a subscription without the buyer going onto a website they can make use of the "),s("a",{attrs:{href:"https://www.payfast.co.za/request-money/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Request Payment"),s("OutboundLink")],1),t._v(" feature on their "),s("a",{attrs:{href:"https://www.payfast.co.za/user/login",target:"_blank",rel:"noopener noreferrer"}},[t._v("PayFast dashboard"),s("OutboundLink")],1),t._v(". The merchant will need to fill in the required fields, then PayFast will send an email on behalf of the merchant with a button to start the subscription. Once the initial payment is made the subscription will be active.")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("Only available for subscriptions. Ad hoc payments will require API integration.")])]),t._v(" "),s("h4",{attrs:{id:"e-commerce-and-platform-plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#e-commerce-and-platform-plugins"}},[t._v("#")]),t._v(" E-commerce and Platform Plugins")]),t._v(" "),s("p",[t._v("Subscriptions will be supported by a number of PayFast supported plugins which may be downloaded from our shopping carts page. Currently the following plugins support subscriptions:")]),t._v(" "),s("ul",[s("li",[t._v("Gravity Forms")]),t._v(" "),s("li",[t._v("WP Invoice")]),t._v(" "),s("li",[t._v("Paid Membership Pro")]),t._v(" "),s("li",[t._v("WHMCS (Uses Ad Hoc)")]),t._v(" "),s("li",[t._v("WooCommerce Subscriptions (Uses Ad Hoc, managed by WooThemes)")]),t._v(" "),s("li",[t._v("Shopify")]),t._v(" "),s("li",[t._v("OpenCart")]),t._v(" "),s("li",[t._v("Drupal Commerce")])]),t._v(" "),s("p",[t._v("Due to some integration requirements, ad hoc payments may not be available via some of our plugins.")]),t._v(" "),s("h4",{attrs:{id:"custom-integration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#custom-integration"}},[t._v("#")]),t._v(" Custom Integration")]),t._v(" "),s("p",[t._v("To accommodate recurring billing for the widest possible merchant base, the traditional custom integration has been extended to allow for the additional subscription fields. Future versions of the API will implement a more RESTful approach with additional security options. Please follow the developer documentation in order to build a custom integration, taking note of the subscription fields on the checkout page, and the return variables.")]),t._v(" "),s("p",[t._v("A passphrase is compulsory for all subscriptions which is set on the merchant’s PayFast settings page. Generation of the signature sent to PayFast follows the current documentation. The order of the additional subscription fields is important and can be seen in the table on the checkout page.")]),t._v(" "),s("h3",{attrs:{id:"recurring-maintenance"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#recurring-maintenance"}},[t._v("#")]),t._v(" Recurring Maintenance")]),t._v(" "),s("h4",{attrs:{id:"buyer-perspective"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#buyer-perspective"}},[t._v("#")]),t._v(" Buyer Perspective")]),t._v(" "),s("p",[t._v("A buyer is able to login to their PayFast account and view or cancel any of their recurring billings. When cancelled by the buyer, the merchant will be notified via email, and/or an ITN will be sent to the notify_url with the payment_status of CANCELLED. The buyer will be able to change the credit card, including card verification and 3D secure, linked to the subscription or ad hoc payment. Should a buyer not have a PayFast account, they will be able to register at any point to manage their subscriptions.")]),t._v(" "),s("h4",{attrs:{id:"expired-cards"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#expired-cards"}},[t._v("#")]),t._v(" Expired Cards")]),t._v(" "),s("p",[t._v("A buyer will be notified via email a month in advance about registered cards which will expire and are linked to an active subscription/agreement. Instructions will be provided in the notification email to help them link a new card to their subscription, so that they do not experience any break in payments or service. A buyer will be permitted to register for subscriptions even if the card is due to expire before the end of the subscription term.")]),t._v(" "),s("h4",{attrs:{id:"merchant-perspective"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#merchant-perspective"}},[t._v("#")]),t._v(" Merchant Perspective")]),t._v(" "),s("p",[t._v("The following actions may be accomplished via the PayFast dashboard, as well as the API")]),t._v(" "),s("h5",{attrs:{id:"cancel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cancel"}},[t._v("#")]),t._v(" Cancel")]),t._v(" "),s("p",[t._v("Any recurring billing type may be cancelled from the PayFast merchant account. The buyer will be notified via email of this action.")]),t._v(" "),s("h5",{attrs:{id:"pause"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pause"}},[t._v("#")]),t._v(" Pause")]),t._v(" "),s("p",[t._v("Should a subscription be paused the remaining payments (cycles) will remain untouched. The end date of the subscription moves on by the number of paused frequency period(s). Effectively the buyer gains a payment gap and the number of payments will still be the same as originally requested. A free month(s) could be provided by pausing (pause) a subscription and reducing the number of cycles by making an update to the subscription.")]),t._v(" "),s("p",[t._v("Only the merchant has the functionality to pause or unpause a subscription.")]),t._v(" "),s("h4",{attrs:{id:"failed-payments"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#failed-payments"}},[t._v("#")]),t._v(" Failed Payments")]),t._v(" "),s("h5",{attrs:{id:"subscriber-out-of-funds"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#subscriber-out-of-funds"}},[t._v("#")]),t._v(" Subscriber Out of Funds")]),t._v(" "),s("p",[t._v("PayFast will try a number of times to reprocess a payment where the buyer does not have funds on their credit card. On failure, the buyer will be notified, allowing some time for the problem to be resolved. On a complete failure (after X amount of times), the subscription will be ‘locked’ and will need some action from the merchant to reactivate on the PayFast account or via the API pause endpoint.")]),t._v(" "),s("h5",{attrs:{id:"ad-hoc-payments-out-of-funds"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ad-hoc-payments-out-of-funds"}},[t._v("#")]),t._v(" ad hoc payments Out of Funds")]),t._v(" "),s("p",[t._v("When receiving the API call to charge an agreement’s credit card via token, PayFast will attempt to charge the card immediately and the failed response will be returned returned.")]),t._v(" "),s("h5",{attrs:{id:"system-issues"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#system-issues"}},[t._v("#")]),t._v(" System Issues")]),t._v(" "),s("p",[t._v("PayFast will resolve any system issue that may cause payment failure. Subscription payments will resume once all systems have been restored.")]),t._v(" "),s("h2",{attrs:{id:"subscription-payments-api-endpoints"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#subscription-payments-api-endpoints"}},[t._v("#")]),t._v(" Subscription Payments API Endpoints")]),t._v(" "),s("h3",{attrs:{id:"url-composition"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#url-composition"}},[t._v("#")]),t._v(" URL Composition")]),t._v(" "),s("p",[t._v("The API exposes the following endpoints which will allow Merchants the ability to interact with subscriptions on their accounts.")]),t._v(" "),s("p",[t._v("URLs to interact with take the following form:")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("https://api.payfast.co.za/[endpoint]/[token]/[action]?testing=true")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th")])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("[endpoint]")]),t._v(" "),s("td",[t._v("This should be set to “subscriptions”")])]),t._v(" "),s("tr",[s("td",[t._v("[token]")]),t._v(" "),s("td",[t._v("The 36 character alphanumeric string returned to your notify URL via the ITN callback which uniquely identifies a subscription")])]),t._v(" "),s("tr",[s("td",[t._v("[action]")]),t._v(" "),s("td",[t._v("This will be the verb describing the intended action to take.")])]),t._v(" "),s("tr",[s("td",[t._v("testing=true")]),t._v(" "),s("td",[t._v("Include this text should you wish to make use of the PayFast sandbox for testing purposes.")])])])]),t._v(" "),s("h3",{attrs:{id:"actions-available-via-the-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#actions-available-via-the-api"}},[t._v("#")]),t._v(" Actions Available via the API")]),t._v(" "),s("p",[t._v("If using a FORM to post data to any endpoint, all FORMs must submit via normal POST forms and have a hidden value called ‘_method’, set to the appropriate verb.")]),t._v(" "),s("h4",{attrs:{id:"recurring-billing-type-1-subscription-payments"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#recurring-billing-type-1-subscription-payments"}},[t._v("#")]),t._v(" Recurring Billing Type 1 – Subscription Payments")]),t._v(" "),s("h4",{attrs:{id:"get-ping"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-ping"}},[t._v("#")]),t._v(" [GET] ping")]),t._v(" "),s("p",[t._v("Used to check if the API is responding to requests.")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("https://api.payfast.co.za/ping")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("NAME")]),t._v(" "),s("th",[t._v("DESCRIPTION")]),t._v(" "),s("th",[t._v("REQUIRED")]),t._v(" "),s("th",[t._v("FORMAT")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("merchant-id")]),t._v(" "),s("td",[t._v("Header, the Merchant ID as given by the PayFast system.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("numeric, 8 char")])]),t._v(" "),s("tr",[s("td",[t._v("version")]),t._v(" "),s("td",[t._v("Header, the PayFast API version.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("v1")])]),t._v(" "),s("tr",[s("td",[t._v("timestamp")]),t._v(" "),s("td",[t._v("Header, the current timestamp.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("ISO-8601 date and time, YYYY-MM-DDTHH:MM:SS[+HH:MM]")])]),t._v(" "),s("tr",[s("td",[t._v("signature")]),t._v(" "),s("td",[t._v("Header, MD5 hash of the alphabetised submitted header and body variables, as well as the passphrase.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("MD5 hash, characters must be in lower case")])])])]),t._v(" "),s("pre",[t._v("Successful ping response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"API V1"')]),t._v("\n")])])]),s("pre",[t._v("Unsuccessful ping response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"put-pause"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#put-pause"}},[t._v("#")]),t._v(" [PUT] pause")]),t._v(" "),s("p",[t._v("Pause a subscription, for a duration indicated by a ‘cycles’ payload variable.")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("https://api.payfast.co.za/subscriptions/dc0521d3-55fe-269b-fa00-b647310d760f/pause")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("NAME")]),t._v(" "),s("th",[t._v("DESCRIPTION")]),t._v(" "),s("th",[t._v("REQUIRED")]),t._v(" "),s("th",[t._v("FORMAT")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("merchant-id")]),t._v(" "),s("td",[t._v("Header, the Merchant ID as given by the PayFast system.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("numeric, 8 char")])]),t._v(" "),s("tr",[s("td",[t._v("version")]),t._v(" "),s("td",[t._v("Header, the PayFast API version.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("v1")])]),t._v(" "),s("tr",[s("td",[t._v("timestamp")]),t._v(" "),s("td",[t._v("Header, the current timestamp.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("ISO-8601 date and time, YYYY-MM-DDTHH:MM:SS[+HH:MM]")])]),t._v(" "),s("tr",[s("td",[t._v("signature")]),t._v(" "),s("td",[t._v("Header, MD5 hash of the alphabetised submitted header and body variables, as well as the passphrase.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("MD5 hash, characters must be in lower case")])]),t._v(" "),s("tr",[s("td",[t._v("cycles")]),t._v(" "),s("td",[t._v("Body, number of cycles to pause the subscription for. Default is 1 if not given.")]),t._v(" "),s("td",[t._v("Optional")]),t._v(" "),s("td",[t._v("numeric")])])])]),t._v(" "),s("pre",[t._v("Successful pause response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("pre",[t._v("Unsuccessful pause response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"put-cancel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#put-cancel"}},[t._v("#")]),t._v(" [PUT] cancel")]),t._v(" "),s("p",[t._v("This will cancel a subscription entirely.")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("https://api.payfast.co.za/subscriptions/dc0521d3-55fe-269b-fa00-b647310d760f/cancel")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("NAME")]),t._v(" "),s("th",[t._v("DESCRIPTION")]),t._v(" "),s("th",[t._v("REQUIRED")]),t._v(" "),s("th",[t._v("FORMAT")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("merchant-id")]),t._v(" "),s("td",[t._v("Header, the Merchant ID as given by the PayFast system.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("numeric, 8 char")])]),t._v(" "),s("tr",[s("td",[t._v("version")]),t._v(" "),s("td",[t._v("Header, the PayFast API version.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("v1")])]),t._v(" "),s("tr",[s("td",[t._v("timestamp")]),t._v(" "),s("td",[t._v("Header, the current timestamp.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("ISO-8601 date and time, YYYY-MM-DDTHH:MM:SS[+HH:MM]")])]),t._v(" "),s("tr",[s("td",[t._v("signature")]),t._v(" "),s("td",[t._v("Header, MD5 hash of the alphabetised submitted header and body variables, as well as the passphrase.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("MD5 hash, characters must be in lower case")])])])]),t._v(" "),s("pre",[t._v("Successful cancel response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("pre",[t._v("Unsuccessful cancel response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"patch-update"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#patch-update"}},[t._v("#")]),t._v(" [PATCH] update")]),t._v(" "),s("p",[t._v("This allows for multiple subscription values to be updated")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("https://api.payfast.co.za/subscriptions/dc0521d3-55fe-269b-fa00-b647310d760f/update")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("NAME")]),t._v(" "),s("th",[t._v("DESCRIPTION")]),t._v(" "),s("th",[t._v("REQUIRED")]),t._v(" "),s("th",[t._v("FORMAT")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("merchant-id")]),t._v(" "),s("td",[t._v("Header, the Merchant ID as given by the PayFast system.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("numeric, 8 char")])]),t._v(" "),s("tr",[s("td",[t._v("version")]),t._v(" "),s("td",[t._v("Header, the PayFast API version.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("v1")])]),t._v(" "),s("tr",[s("td",[t._v("timestamp")]),t._v(" "),s("td",[t._v("Header, the current timestamp.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("ISO-8601 date and time, YYYY-MM-DDTHH:MM:SS[+HH:MM]")])]),t._v(" "),s("tr",[s("td",[t._v("signature")]),t._v(" "),s("td",[t._v("Header, MD5 hash of the alphabetised submitted header and body variables, as well as the passphrase.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("MD5 hash, characters must be in lower case")])]),t._v(" "),s("tr",[s("td",[t._v("cycles")]),t._v(" "),s("td",[t._v("Body, the number of cycles for the subscription.")]),t._v(" "),s("td",[t._v("Optional")]),t._v(" "),s("td",[t._v("numeric")])]),t._v(" "),s("tr",[s("td",[t._v("frequency")]),t._v(" "),s("td",[t._v("Body, the frequency for the subscription")]),t._v(" "),s("td",[t._v("Optional")]),t._v(" "),s("td",[t._v("numeric")])]),t._v(" "),s("tr",[s("td",[t._v("run_date")]),t._v(" "),s("td",[t._v("Body, the next run date for the subscription.")]),t._v(" "),s("td",[t._v("Optional")]),t._v(" "),s("td",[t._v("YYYY-MM-DD")])]),t._v(" "),s("tr",[s("td",[t._v("amount")]),t._v(" "),s("td",[t._v("Body, the amount which the buyer must pay, in CENTS (ZAR).")]),t._v(" "),s("td",[t._v("Optional")]),t._v(" "),s("td",[t._v("numeric")])])])]),t._v(" "),s("pre",[t._v("Successful update response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"token"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a3b3ae55-ab8b-b388-df23-4e6882b86ce0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1628"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cycles"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"14"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cycles_complete"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"9"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"frequency"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"run_date"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2016-07-04"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("pre",[t._v("Unsuccessful update response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("The body must contain at least one of the optional payload variables.")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("The amount field in the API is in cents and not decimal notation as per normal PayFast integrations.")])]),t._v(" "),s("h4",{attrs:{id:"get-fetch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-fetch"}},[t._v("#")]),t._v(" [GET] fetch")]),t._v(" "),s("p",[t._v("Returns a JSON object containing the subscription details")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("https://api.payfast.co.za/subscriptions/dc0521d3-55fe-269b-fa00-b647310d760f/fetch")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("NAME")]),t._v(" "),s("th",[t._v("DESCRIPTION")]),t._v(" "),s("th",[t._v("REQUIRED")]),t._v(" "),s("th",[t._v("FORMAT")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("merchant-id")]),t._v(" "),s("td",[t._v("Header, the Merchant ID as given by the PayFast system.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("numeric, 8 char")])]),t._v(" "),s("tr",[s("td",[t._v("version")]),t._v(" "),s("td",[t._v("Header, the PayFast API version.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("v1")])]),t._v(" "),s("tr",[s("td",[t._v("timestamp")]),t._v(" "),s("td",[t._v("Header, the current timestamp.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("ISO-8601 date and time, YYYY-MM-DDTHH:MM:SS[+HH:MM]")])]),t._v(" "),s("tr",[s("td",[t._v("signature")]),t._v(" "),s("td",[t._v("Header, MD5 hash of the alphabetised submitted header and body variables, as well as the passphrase.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("MD5 hash, characters must be in lower case")])])])]),t._v(" "),s("pre",[t._v("Successful fetch response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"token"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a3b3ae55-ab8b-b388-df23-4e6882b86ce0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1628"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cycles"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"14"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cycles_complete"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"9"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"frequency"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"run_date"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2016-07-04"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("pre",[t._v("Unsuccessful fetch response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"curl-examples"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#curl-examples"}},[t._v("#")]),t._v(" CURL Examples")]),t._v(" "),s("p",[t._v("The examples below demonstrate cURL calls containing the following:")]),t._v(" "),s("ul",[s("li",[t._v("HTTP Method: PUT")]),t._v(" "),s("li",[t._v("URL: https://api.payfast.co.za/")]),t._v(" "),s("li",[t._v("Endpoint: subscriptions/[Token]/[Action]")]),t._v(" "),s("li",[t._v("The calls are made to v1 (version 1) of the API. The merchant-id, version, timestamp and signature are all included as request headers.")])]),t._v(" "),s("h4",{attrs:{id:"pausing-a-subscription"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pausing-a-subscription"}},[t._v("#")]),t._v(" Pausing a subscription")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("curl -v -X PUT -H “merchant-id: 10000100” -H “version: v1” -H “timestamp=2016-04-01T12:00:01” -H “signature=840654b40a8b312e54650e1613696b44” https://api.payfast.co.za/subscriptions/dc0521d3-55fe-269b-fa00-b647310d760f/pause")]),t._v(" "),s("br"),s("br"),t._v("An example of the request information sent can be seen below:")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v(">PUT https://api.payfast.co.za/subscriptions/dc0521d3-55fe-269b-fa00-b647310d760f/pause HTTP/1.1")]),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v(">User-Agent: curl/7.37.0")]),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v(">Host: api.payfast.co.za")]),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v(">Accept: "),s("em",[t._v("/")])]),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v(">merchant-id: 10000100")]),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v(">version: v1")]),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v(">timestamp: 2016-04-01T12:00:01")]),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v(">signature: 840654b40a8b312e54650e1613696b44")]),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v(">Content-Length: 0")]),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v(">Content-Type: application/x-www-form-urlencoded")]),s("br")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$payload")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'Your Pay Load Added'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$token")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'dc0521d3-55fe-269b-fa00-b647310d760f'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Set up cURL, add "?testing=true" to the end when testing')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_init")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"https://api.payfast.co.za/subscriptions/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$token")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"/pause"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_RETURNTRANSFER")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_HEADER")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("false")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_SSL_VERIFYPEER")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_TIMEOUT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_CUSTOMREQUEST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"PUT"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// For the body values such as amount, frequency, & date")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_POSTFIELDS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("http_build_query")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$payload")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_VERBOSE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_HTTPHEADER")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("array")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'version: v1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'merchant-id: 10000100'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'signature: 840654b40a8b312e54650e1613696b44'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'timestamp: 2016-04-01T12:00:01'")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Execute and close cURL")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$data")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_exec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),s("h4",{attrs:{id:"return-variables"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#return-variables"}},[t._v("#")]),t._v(" Return Variables")]),t._v(" "),s("p",[t._v("All responses from the API follow a standard format. It is a JSON encoded string containing code, status and data elements. The data element may contain more than one message.")]),t._v(" "),s("p",[t._v("Outline of a JSON formatted response:")]),t._v(" "),s("ul",[s("li",[t._v("code: The HTTP status code for the result")]),t._v(" "),s("li",[t._v("status: A more verbose description of the result")]),t._v(" "),s("li",[t._v("data: Will contain a response of either true or false for the action and may also contain one or more description(s) for the reason of the result")])]),t._v(" "),s("pre",[t._v("Example of success response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Success"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])])]),s("pre",[t._v("Example of a failure response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"failed"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Failure"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"errors-and-causes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#errors-and-causes"}},[t._v("#")]),t._v(" Errors and Causes")]),t._v(" "),s("p",[t._v("The following errors can be expected during authentication when connecting to PayFast.")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("CODE")]),t._v(" "),s("th",[t._v("ERROR MESSAGE")]),t._v(" "),s("th",[t._v("REASON")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("400")]),t._v(" "),s("td",[t._v("Required variables not present in request"),s("br"),s("br"),t._v("Value for signature is not in the expected format"),s("br"),s("br"),t._v("API version is not valid"),s("br"),s("br"),t._v("Signature not present in headers")]),t._v(" "),s("td",[t._v("The request is missing some or all of the required fields."),s("br"),s("br"),t._v("Generated when the merchant signature provided is not an MD5 hash, or is malformed."),s("br"),s("br"),t._v("Issued when the version header refers to a version that does not exist, or is malformed."),s("br"),s("br"),t._v("The signature has not been provided.")])]),t._v(" "),s("tr",[s("td",[t._v("401")]),t._v(" "),s("td",[t._v("Merchant not found"),s("br"),s("br"),t._v("Request origin not recognised"),s("br"),s("br"),t._v("Request origin could not be verified"),s("br"),s("br"),t._v("Merchant authorisation failed")]),t._v(" "),s("td",[t._v("The given merchant ID was not found."),s("br"),s("br"),t._v("Generated when the request does not contain a REMOTE_ADDR value."),s("br"),s("br"),t._v("Occurs when the request is made from a location not specified in the whitelist."),s("br"),s("br"),t._v("The signature is incorrect.")])]),t._v(" "),s("tr",[s("td",[t._v("404")]),t._v(" "),s("td",[t._v("Service / endpoint not found")]),t._v(" "),s("td",[t._v("The endpoint does not exist or the requesting merchant does not have permission to access.")])]),t._v(" "),s("tr",[s("td",[t._v("429")]),t._v(" "),s("td",[t._v("Signature rate limit reached, please try again in a few minutes")]),t._v(" "),s("td",[t._v("The rate limit was hit.")])]),t._v(" "),s("tr",[s("td",[t._v("500")]),t._v(" "),s("td",[t._v("Application Error"),s("br"),s("br"),t._v("Communication Failure")]),t._v(" "),s("td",[t._v("Application Error."),s("br"),s("br"),t._v("Networking issue with the API.")])])])]),t._v(" "),s("h2",{attrs:{id:"ad-hoc-payments-api-endpoints"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ad-hoc-payments-api-endpoints"}},[t._v("#")]),t._v(" Ad Hoc Payments API Endpoints")]),t._v(" "),s("h3",{attrs:{id:"url-composition-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#url-composition-2"}},[t._v("#")]),t._v(" URL Composition")]),t._v(" "),s("p",[t._v("The API exposes the following endpoints which will allow Merchants the ability to interact with subscriptions on their accounts.")]),t._v(" "),s("p",[t._v("URLs to interact with take the following form:")]),t._v(" "),s("details",{staticClass:"custom-block details"},[s("summary",[t._v("DETAILS")]),t._v(" "),s("p",[t._v("https://api.payfast.co.za/[endpoint]/[token]/[action]?testing=true")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th")])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("[endpoint]")]),t._v(" "),s("td",[t._v("This should be set to “subscriptions”")])]),t._v(" "),s("tr",[s("td",[t._v("[token]")]),t._v(" "),s("td",[t._v("The 36 character alphanumeric string returned to your notify URL via the ITN callback which uniquely identifies a subscription")])]),t._v(" "),s("tr",[s("td",[t._v("[action]")]),t._v(" "),s("td",[t._v("This will be the verb describing the intended action to take.")])]),t._v(" "),s("tr",[s("td",[t._v("testing=true")]),t._v(" "),s("td",[t._v("Include this text should you wish to make use of the PayFast sandbox for testing purposes.")])])])]),t._v(" "),s("h3",{attrs:{id:"actions-available-via-the-api-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#actions-available-via-the-api-2"}},[t._v("#")]),t._v(" Actions Available via the API")]),t._v(" "),s("p",[t._v("If using a FORM to post data to any endpoint, all FORMs must submit via normal POST forms and have a hidden value called ‘_method’, set to the appropriate verb.")]),t._v(" "),s("h3",{attrs:{id:"recurring-billing-type-2-ad-hoc-payments"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#recurring-billing-type-2-ad-hoc-payments"}},[t._v("#")]),t._v(" Recurring Billing Type 2 – Ad Hoc Payments")]),t._v(" "),s("h4",{attrs:{id:"get-ping-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-ping-2"}},[t._v("#")]),t._v(" [GET] ping")]),t._v(" "),s("p",[t._v("Used to check if the API is responding to requests.")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("https://api.payfast.co.za/ping")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("NAME")]),t._v(" "),s("th",[t._v("DESCRIPTION")]),t._v(" "),s("th",[t._v("REQUIRED")]),t._v(" "),s("th",[t._v("FORMAT")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("merchant-id")]),t._v(" "),s("td",[t._v("Header, the Merchant ID as given by the PayFast system.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("numeric, 8 char")])]),t._v(" "),s("tr",[s("td",[t._v("version")]),t._v(" "),s("td",[t._v("Header, the PayFast API version.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("v1")])]),t._v(" "),s("tr",[s("td",[t._v("timestamp")]),t._v(" "),s("td",[t._v("Header, the current timestamp.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("ISO-8601 date and time, YYYY-MM-DDTHH:MM:SS[+HH:MM]")])]),t._v(" "),s("tr",[s("td",[t._v("signature")]),t._v(" "),s("td",[t._v("Header, MD5 hash of the alphabetised submitted header and body variables, as well as the passphrase.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("MD5 hash, characters must be in lower case")])])])]),t._v(" "),s("pre",[t._v("Successful ping response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"API V1"')]),t._v("\n")])])]),s("pre",[t._v("Unsuccessful ping response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"post-adhoc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#post-adhoc"}},[t._v("#")]),t._v(" [POST] adhoc")]),t._v(" "),s("p",[t._v("Charge an ad hoc subscription based on token.")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("https://api.payfast.co.za/subscriptions/dc0521d3-55fe-269b-fa00-b647310d760f/adhoc")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("NAME")]),t._v(" "),s("th",[t._v("DESCRIPTION")]),t._v(" "),s("th",[t._v("REQUIRED")]),t._v(" "),s("th",[t._v("FORMAT")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("merchant-id")]),t._v(" "),s("td",[t._v("Header, the Merchant ID as given by the PayFast system.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("numeric, 8 char")])]),t._v(" "),s("tr",[s("td",[t._v("version")]),t._v(" "),s("td",[t._v("Header, the PayFast API version.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("v1")])]),t._v(" "),s("tr",[s("td",[t._v("timestamp")]),t._v(" "),s("td",[t._v("Header, the current timestamp.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("ISO-8601 date and time, YYYY-MM-DDTHH:MM:SS[+HH:MM]")])]),t._v(" "),s("tr",[s("td",[t._v("signature")]),t._v(" "),s("td",[t._v("Header, MD5 hash of the alphabetised submitted header and body variables, as well as the passphrase.")]),t._v(" "),s("td",[t._v("Yes\tMD5 hash, characters must be in lower case")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("amount")]),t._v(" "),s("td",[t._v("Body, the amount which the buyer must pay, in CENTS (ZAR).")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("numeric")])]),t._v(" "),s("tr",[s("td",[t._v("item_name")]),t._v(" "),s("td",[t._v("Body, the name of the item being charged for.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("alphanumeric")])]),t._v(" "),s("tr",[s("td",[t._v("item_description")]),t._v(" "),s("td",[t._v("Body, the description of the item being charged for.")]),t._v(" "),s("td",[t._v("optional")]),t._v(" "),s("td",[t._v("alphanumeric")])]),t._v(" "),s("tr",[s("td",[t._v("itn")]),t._v(" "),s("td",[t._v("Body, specify whether an ITN must be sent for the ad hoc charge (1 by default).")]),t._v(" "),s("td",[t._v("optional")]),t._v(" "),s("td",[t._v("true or false")])]),t._v(" "),s("tr",[s("td",[t._v("m_payment_id")]),t._v(" "),s("td",[t._v("Body, unique payment ID on the merchant’s system.")]),t._v(" "),s("td",[t._v("optional")]),t._v(" "),s("td",[t._v("alphanumeric")])]),t._v(" "),s("tr",[s("td",[t._v("cc_cvv")]),t._v(" "),s("td",[t._v("Body, the credit card cvv number.")]),t._v(" "),s("td",[t._v("optional")]),t._v(" "),s("td",[t._v("numeric")])])])]),t._v(" "),s("pre",[t._v("Successful Adhoc response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("pre",[t._v("Unsuccessful ping response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("The amount field in the API is in cents and not decimal notation as per normal PayFast integrations.")])]),t._v(" "),s("h4",{attrs:{id:"get-fetch-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-fetch-2"}},[t._v("#")]),t._v(" [GET] fetch")]),t._v(" "),s("p",[t._v("Returns a JSON object containing the subscription details.")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("https://api.payfast.co.za/subscriptions/dc0521d3-55fe-269b-fa00-b647310d760f/fetch")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("NAME")]),t._v(" "),s("th",[t._v("DESCRIPTION")]),t._v(" "),s("th",[t._v("REQUIRED")]),t._v(" "),s("th",[t._v("FORMAT")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("merchant-id")]),t._v(" "),s("td",[t._v("Header, the Merchant ID as given by the PayFast system.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("numeric, 8 char")])]),t._v(" "),s("tr",[s("td",[t._v("version")]),t._v(" "),s("td",[t._v("Header, the PayFast API version.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("v1")])]),t._v(" "),s("tr",[s("td",[t._v("timestamp")]),t._v(" "),s("td",[t._v("Header, the current timestamp.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("ISO-8601 date and time, YYYY-MM-DDTHH:MM:SS[+HH:MM]")])]),t._v(" "),s("tr",[s("td",[t._v("signature")]),t._v(" "),s("td",[t._v("Header, MD5 hash of the alphabetised submitted header and body variables, as well as the passphrase.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("MD5 hash, characters must be in lower case")])])])]),t._v(" "),s("pre",[t._v("Successful fetch response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"token"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a3b3ae55-ab8b-b388-df23-4e6882b86ce0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("pre",[t._v("Unsuccessful fetch response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"put-cancel-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#put-cancel-2"}},[t._v("#")]),t._v(" [PUT] cancel")]),t._v(" "),s("p",[t._v("This will cancel a subscription entirely.")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("https://api.payfast.co.za/subscriptions/dc0521d3-55fe-269b-fa00-b647310d760f/cancel")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("NAME")]),t._v(" "),s("th",[t._v("DESCRIPTION")]),t._v(" "),s("th",[t._v("REQUIRED")]),t._v(" "),s("th",[t._v("FORMAT")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("merchant-id")]),t._v(" "),s("td",[t._v("Header, the Merchant ID as given by the PayFast system.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("numeric, 8 char")])]),t._v(" "),s("tr",[s("td",[t._v("version")]),t._v(" "),s("td",[t._v("Header, the PayFast API version.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("v1")])]),t._v(" "),s("tr",[s("td",[t._v("timestamp")]),t._v(" "),s("td",[t._v("Header, the current timestamp.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("ISO-8601 date and time, YYYY-MM-DDTHH:MM:SS[+HH:MM]")])]),t._v(" "),s("tr",[s("td",[t._v("signature")]),t._v(" "),s("td",[t._v("Header, MD5 hash of the alphabetised submitted header and body variables, as well as the passphrase.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("MD5 hash, characters must be in lower case")])])])]),t._v(" "),s("pre",[t._v("Successful cancel response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("pre",[t._v("Unsuccessful cancel response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"curl-examples-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#curl-examples-2"}},[t._v("#")]),t._v(" CURL Examples")]),t._v(" "),s("p",[t._v("The examples below demonstrate cURL calls containing the following:")]),t._v(" "),s("ul",[s("li",[t._v("HTTP Method: POST")]),t._v(" "),s("li",[t._v("URL: https://api.payfast.co.za/")]),t._v(" "),s("li",[t._v("Endpoint: subscriptions/[Token]/[Action] The calls are made to v1 (version 1) of the API. The merchant-id, version, timestamp and signature are all included as request headers. The amount, item_name and item_description are included in the request body.")])]),t._v(" "),s("h4",{attrs:{id:"charging-a-token"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#charging-a-token"}},[t._v("#")]),t._v(" Charging a Token")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> PUT https://api.payfast.co.za/subscriptions/dc0521d3-55fe-269b-fa00-b647310d760f/adhoc HTTP/1.1")]),t._v(" "),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> User-Agent: curl/7.37.0")]),t._v(" "),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> Host: api.payfast.co.za")]),t._v(" "),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> Accept: "),s("em",[t._v("/")])]),t._v(" "),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> merchant-id: 10000100")]),t._v(" "),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> version: v1")]),t._v(" "),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> timestamp: 2016-04-01T12:00:01")]),t._v(" "),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> signature: 840654b40a8b312e54650e1613696b44")]),t._v(" "),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> Content-Length: 0")]),t._v(" "),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> Content-Type: application/x-www-form-urlencoded")])]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Array used for CURLOPT_POSTFIELDS")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$payload")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("array")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'amount'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'$amount'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'item_name'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'$itemName'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'item_description'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'$itemDescription'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//optional")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$token")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'dc0521d3-55fe-269b-fa00-b647310d760f'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Set up cURL, add "?testing=true" to the end when testing')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_init")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"https://api.payfast.co.za/subscriptions/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$token")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"/adhoc"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_RETURNTRANSFER")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_HEADER")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("false")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_SSL_VERIFYPEER")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_TIMEOUT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_CUSTOMREQUEST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"POST"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// For the body values such as amount, item_name, & item_description")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_POSTFIELDS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("http_build_query")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$payload")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_VERBOSE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_HTTPHEADER")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("array")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'version: v1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'merchant-id: 10000100'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'signature: 840654b40a8b312e54650e1613696b44'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'timestamp: 2016-04-01T12:00:01'")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Execute and close cURL")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$response")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_exec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),s("pre",[t._v("Example of a success response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                 "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                 "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Success"')]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("pre",[t._v("Example of a failure response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"failed"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Failure"')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"return-variables-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#return-variables-2"}},[t._v("#")]),t._v(" Return Variables")]),t._v(" "),s("p",[t._v("All responses from the API follow a standard format. It is a JSON encoded string containing code, status and data elements. The data element may contain more than one message.\nOutline of a JSON formatted response:")]),t._v(" "),s("ul",[s("li",[t._v("code: The HTTP status code for the result")]),t._v(" "),s("li",[t._v("status: A more verbose description of the result")]),t._v(" "),s("li",[t._v("data: Will contain a response of either true or false for the action and may also contain one or more description(s) for the reason of the result")])]),t._v(" "),s("h3",{attrs:{id:"errors-and-causes-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#errors-and-causes-2"}},[t._v("#")]),t._v(" Errors and Causes")]),t._v(" "),s("p",[t._v("The following errors can be expected during authentication when connecting to PayFast.")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("CODE")]),t._v(" "),s("th",[t._v("ERROR MESSAGE")]),t._v(" "),s("th",[t._v("REASON")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("400")]),t._v(" "),s("td",[t._v("Required variables not present in request"),s("br"),s("br"),t._v("Value for signature is not in the expected format"),s("br"),s("br"),t._v("API version is not valid"),s("br"),s("br"),t._v("Signature not present in headers")]),t._v(" "),s("td",[t._v("The request is missing some or all of the required fields."),s("br"),s("br"),t._v("Generated when the merchant signature provided is not an MD5 hash, or is malformed."),s("br"),s("br"),t._v("Issued when the version header refers to a version that does not exist, or is malformed."),s("br"),s("br"),t._v("The signature has not been provided.")])]),t._v(" "),s("tr",[s("td",[t._v("401")]),t._v(" "),s("td",[t._v("Merchant not found"),s("br"),s("br"),t._v("Request origin not recognised"),s("br"),s("br"),t._v("Request origin could not be verified"),s("br"),s("br"),t._v("Merchant authorisation failed")]),t._v(" "),s("td",[t._v("The given merchant ID was not found."),s("br"),s("br"),t._v("Generated when the request does not contain a REMOTE_ADDR value."),s("br"),s("br"),t._v("Occurs when the request is made from a location not specified in the whitelist."),s("br"),s("br"),t._v("The signature is incorrect.")])]),t._v(" "),s("tr",[s("td",[t._v("404")]),t._v(" "),s("td",[t._v("Service / endpoint not found")]),t._v(" "),s("td",[t._v("The endpoint does not exist or the requesting merchant does not have permission to access.")])]),t._v(" "),s("tr",[s("td",[t._v("429")]),t._v(" "),s("td",[t._v("Signature rate limit reached, please try again in a few minutes")]),t._v(" "),s("td",[t._v("The rate limit was hit.")])]),t._v(" "),s("tr",[s("td",[t._v("500")]),t._v(" "),s("td",[t._v("Application Error"),s("br"),s("br"),t._v("Communication Failure")]),t._v(" "),s("td",[t._v("Application Error."),s("br"),s("br"),t._v("Networking issue with the API.")])])])]),t._v(" "),s("h2",{attrs:{id:"payfast-account"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#payfast-account"}},[t._v("#")]),t._v(" PayFast Account")]),t._v(" "),s("h3",{attrs:{id:"available-actions-for-accounts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#available-actions-for-accounts"}},[t._v("#")]),t._v(" Available actions for accounts")]),t._v(" "),s("p",[t._v("The actions described below are available via the API in order for merchants to interact with their PayFast account.")]),t._v(" "),s("h3",{attrs:{id:"transaction-history"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transaction-history"}},[t._v("#")]),t._v(" Transaction History")]),t._v(" "),s("p",[t._v("The URL to interact with will take the following form:")]),t._v(" "),s("details",{staticClass:"custom-block details"},[s("summary",[t._v("DETAILS")]),t._v(" "),s("p",[t._v("https://api.payfast.co.za/transactions/history/[timeframe]")])]),t._v(" "),s("h4",{attrs:{id:"get-history"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-history"}},[t._v("#")]),t._v(" [GET] history")]),t._v(" "),s("p",[t._v("Obtain the transaction history for given a period.")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("https://api.payfast.co.za/transactions/history?from=2017-01-01&to=2017-02-01")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("NAME")]),t._v(" "),s("th",[t._v("DESCRIPTION")]),t._v(" "),s("th",[t._v("REQUIRED")]),t._v(" "),s("th",[t._v("FORMAT")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("merchant-id")]),t._v(" "),s("td",[t._v("Header, the Merchant ID as given by the PayFast system.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("numeric, 8 char")])]),t._v(" "),s("tr",[s("td",[t._v("version")]),t._v(" "),s("td",[t._v("Header, the PayFast API version.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("v1")])]),t._v(" "),s("tr",[s("td",[t._v("timestamp")]),t._v(" "),s("td",[t._v("Header, the current timestamp.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("ISO-8601 date and time, YYYY-MM-DDTHH:MM:SS[+HH:MM]")])]),t._v(" "),s("tr",[s("td",[t._v("signature")]),t._v(" "),s("td",[t._v("Header, MD5 hash of the alphabetised submitted header and body variables, as well as the passphrase.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("MD5 hash, characters must be in lower case")])]),t._v(" "),s("tr",[s("td",[t._v("from")]),t._v(" "),s("td",[t._v("Body, start date for the time period. Defaults to current month")]),t._v(" "),s("td",[t._v("Optional")]),t._v(" "),s("td",[t._v("YYYY-MM-DD")])]),t._v(" "),s("tr",[s("td",[t._v("to")]),t._v(" "),s("td",[t._v("Body, end date for the time period. Defaults to current date")]),t._v(" "),s("td",[t._v("Optional")]),t._v(" "),s("td",[t._v("YYYY-MM-DD")])])])]),t._v(" "),s("details",{staticClass:"custom-block details"},[s("summary",[t._v("DETAILS")]),t._v(" "),s("p",[t._v("A successful daily response will return comma-separated values (CSV) of required the transactions.")])]),t._v(" "),s("pre",[t._v("Unsuccessful history response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"get-weekly"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-weekly"}},[t._v("#")]),t._v(" [GET] weekly")]),t._v(" "),s("p",[t._v("Obtain the transaction history for a given weekly period.")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("https://api.payfast.co.za/transactions/history/weekly?date=2017-01-01")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("NAME")]),t._v(" "),s("th",[t._v("DESCRIPTION")]),t._v(" "),s("th",[t._v("REQUIRED")]),t._v(" "),s("th",[t._v("FORMAT")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("merchant-id")]),t._v(" "),s("td",[t._v("Header, the Merchant ID as given by the PayFast system.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("numeric, 8 char")])]),t._v(" "),s("tr",[s("td",[t._v("version")]),t._v(" "),s("td",[t._v("Header, the PayFast API version.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("v1")])]),t._v(" "),s("tr",[s("td",[t._v("timestamp")]),t._v(" "),s("td",[t._v("Header, the current timestamp.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("ISO-8601 date and time, YYYY-MM-DDTHH:MM:SS[+HH:MM]")])]),t._v(" "),s("tr",[s("td",[t._v("signature")]),t._v(" "),s("td",[t._v("Header, MD5 hash of the alphabetised submitted header and body variables, as well as the passphrase.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("MD5 hash, characters must be in lower case")])]),t._v(" "),s("tr",[s("td",[t._v("date")]),t._v(" "),s("td",[t._v("Body, date of the time period. Defaults to current week")]),t._v(" "),s("td",[t._v("Optional")]),t._v(" "),s("td",[t._v("YYYY-MM-DD")])])])]),t._v(" "),s("details",{staticClass:"custom-block details"},[s("summary",[t._v("DETAILS")]),t._v(" "),s("p",[t._v("A successful weekly response will return comma-separated values (CSV) of required the transactions.")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<pre>Unsuccessful weekly response</pre>\n```JSON\n{\n  "code":500,\n  "status":"error",\n  "data":{\n    "response":false\n  }\n}\n')])])]),s("h4",{attrs:{id:"get-monthly"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-monthly"}},[t._v("#")]),t._v(" [GET] monthly")]),t._v(" "),s("p",[t._v("Obtain the transaction history for a given monthly period.")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("https://api.payfast.co.za/transactions/history/monthly?date=2017-01")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("NAME")]),t._v(" "),s("th",[t._v("DESCRIPTION")]),t._v(" "),s("th",[t._v("REQUIRED")]),t._v(" "),s("th",[t._v("FORMAT")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("merchant-id")]),t._v(" "),s("td",[t._v("Header, the Merchant ID as given by the PayFast system.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("numeric, 8 char")])]),t._v(" "),s("tr",[s("td",[t._v("version")]),t._v(" "),s("td",[t._v("Header, the PayFast API version.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("v1")])]),t._v(" "),s("tr",[s("td",[t._v("timestamp")]),t._v(" "),s("td",[t._v("Header, the current timestamp.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("ISO-8601 date and time, YYYY-MM-DDTHH:MM:SS[+HH:MM]")])]),t._v(" "),s("tr",[s("td",[t._v("signature")]),t._v(" "),s("td",[t._v("Header, MD5 hash of the alphabetised submitted header and body variables, as well as the passphrase.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("MD5 hash, characters must be in lower case")])]),t._v(" "),s("tr",[s("td",[t._v("date")]),t._v(" "),s("td",[t._v("Body, date of the time period. Defaults to current week")]),t._v(" "),s("td",[t._v("Optional")]),t._v(" "),s("td",[t._v("YYYY-MM-DD")])])])]),t._v(" "),s("details",{staticClass:"custom-block details"},[s("summary",[t._v("DETAILS")]),t._v(" "),s("p",[t._v("A successful monthly response will return comma-separated values (CSV) of required the transactions.")])]),t._v(" "),s("pre",[t._v("Unsuccessful monthly response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"credit-card-transaction-query"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#credit-card-transaction-query"}},[t._v("#")]),t._v(" Credit Card Transaction Query")]),t._v(" "),s("p",[t._v("The URL to interact with will take the following forms below.")]),t._v(" "),s("h3",{attrs:{id:"live-endpoint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#live-endpoint"}},[t._v("#")]),t._v(" Live Endpoint:")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("https://api.payfast.co.za/process/query/[Transaction Token / Payfast Payment ID]")])]),t._v(" "),s("h3",{attrs:{id:"sandbox-endpoint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sandbox-endpoint"}},[t._v("#")]),t._v(" Sandbox Endpoint:")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("https://api.payfast.co.za/process/query/[Transaction Token / Payfast Payment ID]?testing=true")])]),t._v(" "),s("p",[t._v("When testing, an optional parameter “testing=true” needs to be appended. This will route transactions to a sandbox environment where no production data is returned.")]),t._v(" "),s("p",[t._v("The Transaction token, or PayFast payment id, needs to be sent to retrieve the transaction details.")]),t._v(" "),s("h4",{attrs:{id:"get-query"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-query"}},[t._v("#")]),t._v(" [GET] query")]),t._v(" "),s("p",[t._v("Query a credit card transaction.")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("https://api.payfast.co.za/process/query/01d2e4c7-28c8-3a86-151f-eab5357da649")]),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("https://api.payfast.co.za/process/query/69")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("NAME")]),t._v(" "),s("th",[t._v("DESCRIPTION")]),t._v(" "),s("th",[t._v("REQUIRED")]),t._v(" "),s("th",[t._v("FORMAT")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("merchant-id")]),t._v(" "),s("td",[t._v("Header, the Merchant ID as given by the PayFast system.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("numeric, 8 char")])]),t._v(" "),s("tr",[s("td",[t._v("version")]),t._v(" "),s("td",[t._v("Header, the PayFast API version.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("v1")])]),t._v(" "),s("tr",[s("td",[t._v("timestamp")]),t._v(" "),s("td",[t._v("Header, the current timestamp.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("ISO-8601 date and time, YYYY-MM-DDTHH:MM:SS[+HH:MM]")])]),t._v(" "),s("tr",[s("td",[t._v("signature")]),t._v(" "),s("td",[t._v("Header, MD5 hash of the alphabetised submitted header and body variables, as well as the passphrase.")]),t._v(" "),s("td",[t._v("Yes")]),t._v(" "),s("td",[t._v("MD5 hash, characters must be in lower case")])])])]),t._v(" "),s("pre",[t._v("Successful query response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"success"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pf_payment_id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"69"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"m_payment_id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"232345"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"COMPLETE"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3600"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cc_status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"00"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cc_message"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Approved or completed successfully (00)"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Success"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("pre",[t._v("Unsuccessful query response")]),t._v(" "),s("div",{staticClass:"language-JSON extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"response"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"api-validation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api-validation"}},[t._v("#")]),t._v(" API Validation")]),t._v(" "),s("h3",{attrs:{id:"curl-examples-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#curl-examples-3"}},[t._v("#")]),t._v(" CURL Examples")]),t._v(" "),s("p",[t._v("The example below demonstrates a cURL call containing the following:")]),t._v(" "),s("ul",[s("li",[t._v("HTTP Method: GET")]),t._v(" "),s("li",[t._v("URL: https://api.payfast.co.za/transactions/history")]),t._v(" "),s("li",[t._v("Endpoint: /daily. The call is made to v1 (version 1) of the API. The merchant-id, version, timestamp and signature are all included as request headers. The date and format are included in the request body.")])]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("curl -v -X PUT -H “merchant-id: 10000100” -H “version: v1” -H “timestamp: 2017-01-01T12:00:00” -H “signature: 840654b40a8b312e54650e1613696b44” https://api.payfast.co.za/transactions/history/daily")]),s("br"),s("br"),t._v("\nAn example of the request information sent can be seen below:")]),t._v(" "),s("p",[s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> GET https://api.payfast.co.za/transactions/history/daily HTTP/1.1")]),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> User-Agent: curl/7.37.0")]),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> Host: api.payfast.co.za ")]),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> Accept: "),s("em",[t._v("/")])]),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> merchant-id: 10000100")]),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> version: v1 ")]),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> timestamp: 2017-01-01T12:00:00")]),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> version: v1 ")]),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> signature: 840654b40a8b312e54650e1613696b44")]),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> Content-Length: 0 ")]),s("br"),s("br"),t._v(" "),s("span",{staticStyle:{"background-color":"#e6e6ff"}},[t._v("> Content-Type: application/x-www-form-urlencoded")]),s("br"),s("br")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// URL for curl_init")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$url")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"https://api.payfast.co.za/transactions/history/daily?date=2017-01-01"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Set up cURL")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_init")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$url")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_RETURNTRANSFER")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_HEADER")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("false")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_SSL_VERIFYPEER")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_TIMEOUT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_CUSTOMREQUEST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"GET"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_VERBOSE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_setopt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CURLOPT_HTTPHEADER")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("array")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'version: v1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'merchant-id: 10000100'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'signature: 840654b40a8b312e54650e1613696b44'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'timestamp: 2017-01-01T12:00:00'")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Execute and close cURL")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$response")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_exec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl_close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),s("h3",{attrs:{id:"errors-and-causes-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#errors-and-causes-3"}},[t._v("#")]),t._v(" Errors and Causes")]),t._v(" "),s("p",[t._v("The following errors can be expected during authentication when connecting to PayFast.")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("CODE")]),t._v(" "),s("th",[t._v("ERROR MESSAGE")]),t._v(" "),s("th",[t._v("REASON")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("400")]),t._v(" "),s("td",[t._v("Required variables not present in request"),s("br"),s("br"),t._v("Value for signature is not in the expected format"),s("br"),s("br"),t._v("API version is not valid"),s("br"),s("br"),t._v("Signature not present in headers")]),t._v(" "),s("td",[t._v("The request is missing some or all of the required fields."),s("br"),s("br"),t._v("Generated when the merchant signature provided is not an MD5 hash, or is malformed."),s("br"),s("br"),t._v("Issued when the version header refers to a version that does not exist, or is malformed."),s("br"),s("br"),t._v("The signature has not been provided.")])]),t._v(" "),s("tr",[s("td",[t._v("401")]),t._v(" "),s("td",[t._v("Merchant not found "),s("br"),s("br"),t._v("Request origin not recognised"),s("br"),s("br"),t._v("Request origin could not be verified"),s("br"),s("br"),t._v("Merchant authorisation failed")]),t._v(" "),s("td",[t._v("The given merchant ID was not found."),s("br"),s("br"),t._v("Generated when the request does not contain a REMOTE_ADDR value."),s("br"),s("br"),t._v("Occurs when the request is made from a location not specified in the whitelist."),s("br"),s("br"),t._v("The signature is incorrect.")])]),t._v(" "),s("tr",[s("td",[t._v("404")]),t._v(" "),s("td",[t._v("Service / endpoint not found")]),t._v(" "),s("td",[t._v("The endpoint does not exist or the requesting merchant does not have permission to access.")])]),t._v(" "),s("tr",[s("td",[t._v("429")]),t._v(" "),s("td",[t._v("Signature rate limit reached, please try again in a few minutes")]),t._v(" "),s("td",[t._v("The rate limit was hit.")])]),t._v(" "),s("tr",[s("td",[t._v("500")]),t._v(" "),s("td",[t._v("Application Error"),s("br"),s("br"),t._v("Communication Failure")]),t._v(" "),s("td",[t._v("Application Error."),s("br"),s("br"),t._v("Networking issue with the API.")])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);